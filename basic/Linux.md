# 基础命令

## 搜索查找

### find

从指定目录递归地遍历满足条件的文件

**基本语法**

```bash
find [搜索范围，默认当前目录][选项]
```

**选项说明**

- `-name`：指定文件名查找文件

- `-user`：查找指定用户的文件

- `-size`：查找指定文件大小文件,单位略；

  - > 可以用来排查大文件

### locate

利用事先建立的系统中所有文件名称及路径的locate数据库快速定位文件

> 由于locate指定基于数据库查询，第一次运行前，必须使用`updatedb`指令创建locate数据库

**基本语法**

```bash
locate 搜索文件
```

# Shell编程

shell脚本开头如下：

```bash
#!/bin/bash
```

脚本运行方法有以下两种方式:

```bash
bash 脚本 # 创建一个子shell运行脚本
. 脚本 # 在当前shell中运行脚本
```



## 变量

变量按照两个角度分类:

1. 系统变量与用户自定义变量
2. 全局变量与局部变量

```bash
env # 查看系统全局变量
set | less # 查看全部的变量
```

### **基本语法**

1. 定义变量：变量名=变量值

   > 注意，=前后没有空格

2. 撤销变量:`unset` 变量名

3. 声明静态变量：`readonly` 变量

   > 注意，不能unset

### 全局变量

> 在子shell中更改的，父shell没有变化。比如子shell声明一个全局变量，父shell无法访问

将局部变量升级为全局变量

```bash
export 变量
```

`$PATH`环境变量是shell查找命令的目录。添加**自定义命令路径**，就可以直接调用shell脚本

### 特殊变量

1. `$n`:代表第n个参数，9以上用大括号，如`${10}`

2. `$#`:获取参数个数
3. `$*`和`$@`：代表命令行中的所有参数
   1. `$*`：`"$*"`把所有参数看作一个整体
   2. `$@`：`"$@"`把所有参数作为一个集合
4. `$?`：最后一次执行命令的返回状态
   1. 返回0：命令执行成功
   2. 返回非0：命令执行失败

## 运算符

> 命令替换：指将命令的标准输出值赋值给某个变量。
>
> 命令替换方式：
>
> - `'命令'`
> - `$(命令)`

### 基本语法

```bash
$((运算式)) 或 $[运算式]
```

## 条件判断

### 基本语法

1. `test condition`

2. `[ conditioin ]`

   > condition前后要有空格

### 常用判断条件

> 字符串之间的比较用`=`和`!=`

#### 整数比较

1. `-eq` equal
2. `-ne` not equal
3. `-lt` less than
4. `-le` less equal
5. `-gt` greater than
6. `ge` greater equal

#### 布尔运算

1. `!` 非
2. `-a` and
3. `-o` or

#### 文件权限

1. `-r` read
2. `-w` write
3. `-x` execute

#### 文件类型

1. `-e` existence
2. `-f` file
3. `-d` directory

```bash
# &&表示前一条命令执行成功，才执行后一条命令，||表示上一条命令执行失败，才执行下一条命令
$[ sdfadf ] && echo OK || echo notOK
```

## `流程控制`

> `；`用来分隔命令

### if判断

#### 基本语法

1. 单支

```bash
if [ 条件 ]; then
	程序
fi
```

或

```bash
if [ 条件 ]
then
	程序
fi
```

2. 多分支

```bash
if [ 条件 ]
then
	程序
elif
then
	程序
else
	程序
fi
```

### case语句

#### 基本语法

```bash
case $变量名 in
"值1")
	程序
;;
"值2")
	程序
;;
*)
	程序
esac
```

`;;`相当于break，`*`相当于default

### for循环

#### 基本语法

```bash
for ((初始值;循环条件;变量变化))
do
	程序
done
```

```bash
for 变脸 in 值1 值2 ...
do
	程序
done
```

> `{}`在Linux表示序列，如`{1..100}`表示1-100的序列

求1到100的和

```bash
for i in {1..100}
do
	sum=$[$sum+$i]
done
```

